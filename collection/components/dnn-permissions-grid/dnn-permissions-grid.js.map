{"version":3,"file":"dnn-permissions-grid.js","sourceRoot":"","sources":["../../../src/components/dnn-permissions-grid/dnn-permissions-grid.tsx"],"names":[],"mappings":"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","sourcesContent":["import { Component, Host, h, Prop, State, Event, EventEmitter, Watch } from '@stencil/core';\r\nimport { ILocalization } from './localization-interface';\r\nimport { IPermissionDefinition, IPermissions, IRolePermission, IUserPermission } from './permissions-interface';\r\nimport { IRoleGroup } from './role-group-interface';\r\nimport { IRole } from './role-interface';\r\nimport { ISearchedUser } from './searched-user-interface';\r\n\r\n@Component({\r\n  tag: 'dnn-permissions-grid',\r\n  styleUrl: 'dnn-permissions-grid.scss',\r\n  shadow: true,\r\n})\r\nexport class DnnPermissionsGrid {\r\n\r\n  /** The list of permissions. */\r\n  @Prop({mutable: true}) permissions!: IPermissions;\r\n\r\n  /** The list of role groups. */\r\n  @Prop() roleGroups!: IRoleGroup[];\r\n\r\n  /** The list of possible roles. */\r\n  @Prop() roles!: IRole[];\r\n\r\n  /** Optionally allows localizing the component strings. */\r\n  @Prop() resx: ILocalization = {\r\n    Add: \"Add\",\r\n    AllRoles: \"All Roles\",\r\n    FilterByGroup: \"Filter By Group\",\r\n    GlobalRoles: \"Global Roles\",\r\n    Role: \"Role\",\r\n    RolePermissions: \"Role Permissions\",\r\n    SelectRole: \"Select Role\",\r\n    User: \"User\",\r\n    UserPermissions: \"User Permissions\",\r\n  }\r\n\r\n  /** The list of users to show under the search users field when a search is performed. */\r\n  @Prop() foundUsers: ISearchedUser[] = [];\r\n\r\n  /** Fires when searching for users to add to the permissions. Emits the search query. */\r\n  @Event() userSearchQueryChanged: EventEmitter<string>;\r\n  \r\n  /** Fires when any permissions have changed, can be used for instance to have linked permissions. */\r\n  @Event() permissionsChanged: EventEmitter<IPermissions>;\r\n\r\n  @State() selectedRoleGroupId = -1;\r\n  @State() userQuery: string;\r\n  @State() pickedUser: ISearchedUser;\r\n  \r\n  \r\n  @Watch(\"foundUsers\")\r\n  handleFoundUsersChanged(newValue: ISearchedUser[]){\r\n    if (newValue?.length > 0){\r\n      setTimeout(() => {\r\n        this.userCollapsible.expanded = true;\r\n      }, 100);\r\n    }\r\n  }\r\n  \r\n  componentWillLoad() {\r\n    document.addEventListener(\"click\", this.dismissUserResults.bind(this));\r\n  }\r\n  \r\n  disconnectedCallback() {\r\n    document.removeEventListener(\"click\", this.disconnectedCallback.bind(this));\r\n  }\r\n  \r\n  private roleDropDown: HTMLSelectElement;\r\n  private userCollapsible: HTMLDnnCollapsibleElement;\r\n\r\n  private dismissUserResults(e: MouseEvent){\r\n    const dropdownRect = this.roleDropDown.getBoundingClientRect();\r\n    if (\r\n      e.pageX > dropdownRect.right ||\r\n      e.pageX < dropdownRect.left ||\r\n      e.pageY > dropdownRect.bottom ||\r\n      e.pageY < dropdownRect.top){\r\n        this.userCollapsible.expanded = false;\r\n      }\r\n  } \r\n\r\n  private handleRoleGroupChanged(dropdown: HTMLSelectElement): void {\r\n    const index = dropdown.selectedIndex;\r\n    const value = Number.parseInt(dropdown.options[index].value);\r\n    this.selectedRoleGroupId = value;\r\n  }\r\n\r\n  private addRole(): void {\r\n    const roleId = Number.parseInt(this.roleDropDown.options[this.roleDropDown.selectedIndex].value);\r\n    const role = this.roles.filter(r => r.RoleId == roleId)[0];\r\n    this.permissions = {\r\n      ...this.permissions,\r\n      rolePermissions: [\r\n        ...this.permissions.rolePermissions,\r\n        {\r\n          default: false,\r\n          locked: false,\r\n          permissions: [],\r\n          roleId: role.RoleId,\r\n          roleName: role.RoleName,\r\n        }\r\n      ]\r\n    }\r\n    this.permissionsChanged.emit(this.permissions);\r\n  }\r\n\r\n  private addUser(): void {\r\n    if (this.pickedUser != undefined){\r\n      this.permissions = {\r\n        ...this.permissions,\r\n        userPermissions: [\r\n          ...this.permissions.userPermissions,\r\n          {\r\n            displayName: this.pickedUser.displayName,\r\n            permissions: [],\r\n            userId: this.pickedUser.userId,\r\n          },\r\n        ],\r\n      };\r\n      this.pickedUser = undefined;\r\n      this.userQuery = \"\";\r\n      this.permissionsChanged.emit(this.permissions);\r\n    }\r\n  }\r\n\r\n  private getRoles(){\r\n    const filteredRoles = this.roles.filter(role => \r\n      !this.permissions.rolePermissions.some(rp => rp.roleId == role.RoleId))\r\n    if (this.selectedRoleGroupId == -2){\r\n      // All Roles\r\n      return filteredRoles;\r\n    }\r\n\r\n    if (this.selectedRoleGroupId == -1){\r\n      // Global Roles\r\n      return filteredRoles.filter(role => role.IsSystemRole);\r\n    }\r\n    \r\n    return filteredRoles.filter(role => role.RoleGroupId == this.selectedRoleGroupId);\r\n  }\r\n\r\n  private renderRoleCheckBox(rolePermission: IRolePermission, permissionDefinition: IPermissionDefinition) {\r\n    const item = rolePermission.permissions.filter(permission => permission.permissionId == permissionDefinition.permissionId)[0];\r\n    if (rolePermission.locked){\r\n      return(\r\n        <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 0 24 24\" width=\"24px\" fill=\"#000000\"><g fill=\"none\"><path d=\"M0 0h24v24H0V0z\"/><path d=\"M0 0h24v24H0V0z\" opacity=\".87\"/></g><path d=\"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM9 6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9V6zm9 14H6V10h12v10zm-6-3c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2z\"/></svg>\r\n      )\r\n    }\r\n\r\n    const checked = item == undefined ? \"intermediate\" : item.allowAccess ? \"checked\" : \"unchecked\";\r\n    return(\r\n      <dnn-checkbox\r\n        use-intermediate\r\n        checked={checked}\r\n        onCheckedchange={e => this.handleRoleChanged(e.detail, rolePermission, permissionDefinition)}\r\n      >\r\n        <div slot=\"intermediateicon\">\r\n          <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 0 24 24\" width=\"24px\" fill=\"#000000\"><path d=\"M0 0h24v24H0V0z\" fill=\"none\"/><path d=\"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z\"/></svg>\r\n        </div>\r\n        <div slot=\"uncheckedicon\">\r\n          <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 0 24 24\" width=\"24px\" fill=\"#000000\"><path d=\"M0 0h24v24H0V0z\" fill=\"none\"/><path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM4 12c0-4.42 3.58-8 8-8 1.85 0 3.55.63 4.9 1.69L5.69 16.9C4.63 15.55 4 13.85 4 12zm8 8c-1.85 0-3.55-.63-4.9-1.69L18.31 7.1C19.37 8.45 20 10.15 20 12c0 4.42-3.58 8-8 8z\"/></svg>\r\n        </div>\r\n        <span>{permissionDefinition.permissionName}</span>\r\n      </dnn-checkbox>\r\n    )\r\n  }\r\n\r\n  private renderUserCheckBox(userPermission: IUserPermission, permissionDefinition: IPermissionDefinition) {\r\n    const item = userPermission.permissions.filter(permission => permission.permissionId == permissionDefinition.permissionId)[0];\r\n\r\n    const checked = item == undefined ? \"intermediate\" : item.allowAccess ? \"checked\" : \"unchecked\";\r\n    return(\r\n      <dnn-checkbox\r\n        use-intermediate\r\n        checked={checked}\r\n        onCheckedchange={e => this.handleUserChanged(e.detail, userPermission, permissionDefinition)}\r\n      >\r\n        <div slot=\"intermediateicon\">\r\n          <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 0 24 24\" width=\"24px\" fill=\"#000000\"><path d=\"M0 0h24v24H0V0z\" fill=\"none\"/><path d=\"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z\"/></svg>\r\n        </div>\r\n        <div slot=\"uncheckedicon\">\r\n          <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 0 24 24\" width=\"24px\" fill=\"#000000\"><path d=\"M0 0h24v24H0V0z\" fill=\"none\"/><path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM4 12c0-4.42 3.58-8 8-8 1.85 0 3.55.63 4.9 1.69L5.69 16.9C4.63 15.55 4 13.85 4 12zm8 8c-1.85 0-3.55-.63-4.9-1.69L18.31 7.1C19.37 8.45 20 10.15 20 12c0 4.42-3.58 8-8 8z\"/></svg>\r\n        </div>\r\n        <span>{permissionDefinition.permissionName}</span>\r\n      </dnn-checkbox>\r\n    )\r\n  }\r\n  \r\n  private handleRoleChanged(\r\n    checked: \"checked\" | \"unchecked\" | \"intermediate\",\r\n    rolePermission: IRolePermission,\r\n    permissionDefinition: IPermissionDefinition\r\n  ): void {\r\n    switch (checked) {\r\n      case \"unchecked\":\r\n        this.permissions = {\r\n          ...this.permissions,\r\n          rolePermissions: [\r\n            ...this.permissions.rolePermissions.map(r => {\r\n              if (r.roleId != rolePermission.roleId){\r\n                return r;\r\n              }\r\n\r\n              const newRolePermission = Object.assign({}, r);\r\n              newRolePermission.permissions = [\r\n                ...newRolePermission.permissions.filter(p => p.permissionId != permissionDefinition.permissionId),\r\n                {\r\n                  allowAccess: false,\r\n                  fullControl: false,\r\n                  permissionCode: permissionDefinition.permissionCode,\r\n                  permissionId: permissionDefinition.permissionId,\r\n                  permissionKey: permissionDefinition.permissionKey,\r\n                  permissionName: permissionDefinition.permissionName,\r\n                  view: false,\r\n                },\r\n              ];\r\n              return newRolePermission;\r\n            }),\r\n          ],\r\n        };\r\n        break;\r\n      case \"checked\":\r\n        this.permissions = {\r\n          ...this.permissions,\r\n          rolePermissions: [\r\n            ...this.permissions.rolePermissions.map(r => {\r\n              if (r.roleId != rolePermission.roleId){\r\n                return r;\r\n              }\r\n\r\n              const newRolePermission = Object.assign({}, r);\r\n              newRolePermission.permissions = [\r\n                ...newRolePermission.permissions.filter(p => p.permissionId != permissionDefinition.permissionId),\r\n                {\r\n                  allowAccess: true,\r\n                  fullControl: false,\r\n                  permissionCode: permissionDefinition.permissionCode,\r\n                  permissionId: permissionDefinition.permissionId,\r\n                  permissionKey: permissionDefinition.permissionKey,\r\n                  permissionName: permissionDefinition.permissionName,\r\n                  view: false,\r\n                },\r\n              ];\r\n              return newRolePermission;\r\n            }),\r\n          ],\r\n        };\r\n        break;\r\n        case \"intermediate\":\r\n        this.permissions = {\r\n          ...this.permissions,\r\n          rolePermissions: [\r\n            ...this.permissions.rolePermissions.map(r => {\r\n              if (r.roleId != rolePermission.roleId){\r\n                return r;\r\n              }\r\n\r\n              const newRolePermission = Object.assign({}, r);\r\n              newRolePermission.permissions = [\r\n                ...newRolePermission.permissions.filter(p => p.permissionId != permissionDefinition.permissionId),\r\n              ];\r\n              return newRolePermission;\r\n            }),\r\n          ],\r\n        };\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    this.permissionsChanged.emit(this.permissions);\r\n  }\r\n\r\n  private handleUserChanged(\r\n    checked: \"checked\" | \"unchecked\" | \"intermediate\",\r\n    userPermission: IUserPermission,\r\n    permissionDefinition: IPermissionDefinition\r\n  ): void {\r\n    switch (checked) {\r\n      case \"unchecked\":\r\n        this.permissions = {\r\n          ...this.permissions,\r\n          userPermissions: [\r\n            ...this.permissions.userPermissions.map(u => {\r\n              if (u.userId != userPermission.userId){\r\n                return u;\r\n              }\r\n\r\n              const newUserPermission = Object.assign({}, u);\r\n              newUserPermission.permissions = [\r\n                ...newUserPermission.permissions.filter(p => p.permissionId != permissionDefinition.permissionId),\r\n                {\r\n                  allowAccess: false,\r\n                  fullControl: false,\r\n                  permissionCode: permissionDefinition.permissionCode,\r\n                  permissionId: permissionDefinition.permissionId,\r\n                  permissionKey: permissionDefinition.permissionKey,\r\n                  permissionName: permissionDefinition.permissionName,\r\n                  view: false,\r\n                },\r\n              ];\r\n              return newUserPermission;\r\n            }),\r\n          ],\r\n        };\r\n        break;\r\n      case \"checked\":\r\n        this.permissions = {\r\n          ...this.permissions,\r\n          userPermissions: [\r\n            ...this.permissions.userPermissions.map(u => {\r\n              if (u.userId != userPermission.userId){\r\n                return u;\r\n              }\r\n\r\n              const newUserPermission = Object.assign({}, u);\r\n              newUserPermission.permissions = [\r\n                ...newUserPermission.permissions.filter(p => p.permissionId != permissionDefinition.permissionId),\r\n                {\r\n                  allowAccess: true,\r\n                  fullControl: false,\r\n                  permissionCode: permissionDefinition.permissionCode,\r\n                  permissionId: permissionDefinition.permissionId,\r\n                  permissionKey: permissionDefinition.permissionKey,\r\n                  permissionName: permissionDefinition.permissionName,\r\n                  view: false,\r\n                },\r\n              ];\r\n              return newUserPermission;\r\n            }),\r\n          ],\r\n        };\r\n        break;\r\n        case \"intermediate\":\r\n        this.permissions = {\r\n          ...this.permissions,\r\n          userPermissions: [\r\n            ...this.permissions.userPermissions.map(u => {\r\n              if (u.userId != userPermission.userId){\r\n                return u;\r\n              }\r\n\r\n              const newUserPermission = Object.assign({}, u);\r\n              newUserPermission.permissions = [\r\n                ...newUserPermission.permissions.filter(p => p.permissionId != permissionDefinition.permissionId),\r\n              ];\r\n              return newUserPermission;\r\n            }),\r\n          ],\r\n        };\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    this.permissionsChanged.emit(this.permissions);\r\n  }\r\n\r\n  private removeRole(rolePermission: IRolePermission): void {\r\n    this.permissions = {\r\n      ...this.permissions,\r\n      rolePermissions: [\r\n        ...this.permissions.rolePermissions.filter(rp => rp.roleId != rolePermission.roleId),\r\n      ],\r\n    };\r\n    this.permissionsChanged.emit();\r\n  }\r\n\r\n  private removeUser(userPermission: IUserPermission): void {\r\n    this.permissions = {\r\n      ...this.permissions,\r\n      userPermissions: [\r\n        ...this.permissions.userPermissions.filter(up => up.userId != userPermission.userId),\r\n      ]\r\n    };\r\n    this.permissionsChanged.emit(this.permissions);\r\n  }\r\n\r\n  private handleQueryChanged(query: string): void {\r\n    this.userQuery = query;\r\n    if (query == undefined || query.length == 0){\r\n      this.userCollapsible.expanded = false;\r\n      this.pickedUser = undefined;\r\n      this.foundUsers = [];\r\n      return;\r\n    }\r\n    this.userSearchQueryChanged.emit(query);\r\n  }\r\n\r\n  private handleSearchUserFieldKeyDown(e: KeyboardEvent): void {\r\n    if (e.key != \"ArrowDown\"){\r\n      return;\r\n    }\r\n\r\n    e.preventDefault();\r\n    const firstButton = this.userCollapsible.querySelector(\"button\");\r\n    if (firstButton != undefined){\r\n      firstButton.focus();\r\n    }\r\n  }\r\n\r\n  private handleSearchedUserKeyDown(e: KeyboardEvent): void {\r\n    const button = e.target as HTMLButtonElement;\r\n    \r\n    switch(e.key) {\r\n      case \"ArrowDown\":\r\n        e.preventDefault();\r\n        const nextButton = button.nextElementSibling as HTMLButtonElement;\r\n        nextButton?.focus();\r\n        break;\r\n      case \"ArrowUp\":\r\n        e.preventDefault();\r\n        const previousButton = button.previousElementSibling as HTMLButtonElement;\r\n        previousButton?.focus();\r\n      break;\r\n      default:\r\n        break;\r\n    }\r\n  }\r\n\r\n  private handleUserPicked(searchedUser: ISearchedUser): void {\r\n    this.userQuery = searchedUser.displayName;\r\n    this.pickedUser = searchedUser;\r\n  }\r\n\r\n  private getFilteredUsers() {\r\n    return this.foundUsers.filter(fu => !this.permissions.userPermissions.some(up => up.userId == fu.userId))\r\n  }\r\n  \r\n  render() {\r\n    const filteredRoles = this.getRoles();\r\n    return (\r\n      <Host>\r\n        <div class=\"add-role-row\">\r\n          <div class=\"dropdown\">\r\n            <label>{this.resx.FilterByGroup} :</label>\r\n            <select\r\n              onChange={e => this.handleRoleGroupChanged(e.target as HTMLSelectElement)}\r\n            >\r\n              <option\r\n                value={-2}\r\n                selected={this.selectedRoleGroupId == -2}\r\n              >\r\n                {this.resx.AllRoles}\r\n              </option>\r\n              <option\r\n                value={-1}\r\n                selected={this.selectedRoleGroupId == -1}\r\n              >\r\n                {this.resx.GlobalRoles}\r\n              </option>\r\n              {this.roleGroups.map(roleGroup =>\r\n                <option\r\n                  value={roleGroup.id}\r\n                  selected={this.selectedRoleGroupId == roleGroup.id}\r\n                >\r\n                  {roleGroup.name}\r\n                </option>\r\n              )}\r\n            </select>\r\n          </div>\r\n            {filteredRoles && filteredRoles.length > 0 && [\r\n              <div class=\"dropdown\">\r\n                <label>{this.resx.SelectRole} :</label>\r\n                <select ref={el => this.roleDropDown = el}>\r\n                  {this.getRoles().map(role =>\r\n                    <option value={role.RoleId}\r\n                    >\r\n                      {role.RoleName}\r\n                    </option>\r\n                  )}\r\n                </select>\r\n              </div>,\r\n              <dnn-button\r\n              type=\"primary\"\r\n              onClick={() => this.addRole()}\r\n              >\r\n                {this.resx.Add}\r\n              </dnn-button>\r\n            ]\r\n          }\r\n        </div>\r\n        <table class=\"roles-table\">\r\n          <caption>{this.resx.RolePermissions}</caption>\r\n          <thead>\r\n            <tr>\r\n              <th>{this.resx.Role}</th>\r\n              {this.permissions.permissionDefinitions.map(permissionDefinition =>\r\n                <th>{permissionDefinition.permissionName}</th>\r\n              )}\r\n              <th>&nbsp;</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {this.permissions.rolePermissions.map(rolePermission =>\r\n              <tr>\r\n                <th>{rolePermission.roleName}</th>\r\n                {this.permissions.permissionDefinitions.map(permissionDefinition =>\r\n                  <td>\r\n                    {this.renderRoleCheckBox(rolePermission, permissionDefinition)}\r\n                  </td>\r\n                )}\r\n                <td>\r\n                  {!rolePermission.default &&\r\n                    <button\r\n                      onClick={() => this.removeRole(rolePermission)}\r\n                    >\r\n                      <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 0 24 24\" width=\"24px\" fill=\"#000000\"><path d=\"M0 0h24v24H0V0z\" fill=\"none\"/><path d=\"M14.59 8L12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41 14.59 8zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z\"/></svg>\r\n                    </button>\r\n                  }\r\n                </td>\r\n              </tr>\r\n            )}\r\n          </tbody>\r\n        </table>\r\n        <div class=\"search-user\">\r\n          <div class=\"search-control\">\r\n            <dnn-searchbox\r\n              placeholder={this.resx.User}\r\n              debounced\r\n              onQueryChanged={e => this.handleQueryChanged(e.detail)}\r\n              onKeyDown={e => this.handleSearchUserFieldKeyDown(e)}\r\n              query={this.userQuery}\r\n            />\r\n            <dnn-collapsible ref={el => this.userCollapsible = el}>\r\n              <div class=\"dropdown\">\r\n                {this.getFilteredUsers().map(searchedUser =>\r\n                  <button\r\n                    onKeyDown={e => this.handleSearchedUserKeyDown(e)}\r\n                    onClick={() => this.handleUserPicked(searchedUser)}\r\n                  >\r\n                    {searchedUser.displayName}\r\n                  </button>\r\n                )}\r\n              </div>\r\n            </dnn-collapsible>\r\n          </div>\r\n          {this.pickedUser &&\r\n            <dnn-button\r\n              onClick={() => this.addUser()}\r\n            >\r\n              {this.resx.Add}\r\n            </dnn-button>\r\n          }\r\n        </div>\r\n        {this.permissions.userPermissions && this.permissions.userPermissions.length > 0 &&\r\n          <table class=\"users-table\">\r\n            <caption>{this.resx.UserPermissions}</caption>\r\n            <thead>\r\n              <tr>\r\n                <th>{this.resx.User}</th>\r\n                {this.permissions.permissionDefinitions.map(permissionDefinition =>\r\n                  <th>{permissionDefinition.permissionName}</th>\r\n                )}\r\n                <th>&nbsp;</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {this.permissions.userPermissions.map(userPermission =>\r\n                <tr>\r\n                  <th>{userPermission.displayName}</th>\r\n                  {this.permissions.permissionDefinitions.map(permissionDefinition =>\r\n                    <td>\r\n                      {this.renderUserCheckBox(userPermission, permissionDefinition)}\r\n                    </td>\r\n                  )}\r\n                  <td>\r\n                    <button\r\n                      onClick={() => this.removeUser(userPermission)}\r\n                    >\r\n                      <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24px\" viewBox=\"0 0 24 24\" width=\"24px\" fill=\"#000000\"><path d=\"M0 0h24v24H0V0z\" fill=\"none\"/><path d=\"M14.59 8L12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41 14.59 8zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z\"/></svg>\r\n                    </button>\r\n                </td>\r\n                </tr>\r\n              )}\r\n            </tbody>\r\n          </table>\r\n        }\r\n      </Host>\r\n    );\r\n  }\r\n}"]}